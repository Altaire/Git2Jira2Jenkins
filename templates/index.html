$def with(statistics, succ_merge_succ_build, succ_merge_fail_build, succ_merge_no_build, fail_merge, no_merge, jira_priority_map)
<html>
<head>
    <title>Git branch status</title>
    <link rel="stylesheet" type="text/css" href="/static/smoothtaste.css"/>
    <link rel="stylesheet" type="text/css" href="/static/main.css"/>
</head>

<body>

<a>Статистика:</a><br/>
    $for stat in statistics:
        <a>$stat['jira_task_status']: $stat['count(*)']</a><br/>
<br/>

<a>Мерджится с мастером и собирается: $len(succ_merge_succ_build)</a>
<table>
    $for branch in succ_merge_succ_build:
    <tr>
        <td><a href="http://jira.hh.ru/browse/$branch['jira_task_id']">$branch['branch']</a></td>
        <td>
            <img src="$jira_priority_map[branch['jira_task_priority'] + '_icon']" alt="$branch['jira_task_priority']"
                 title="$branch['jira_task_priority']" width="16" align="absmiddle" border="0" height="16">
        </td>
        <td>$branch['jira_task_summary']</td>
    </tr>
</table>
<br/>

<a>Мерджится с мастером и не собирается: $len(succ_merge_fail_build)</a>
<table>
    $for branch in succ_merge_fail_build:
    <tr>
        <td><a href="http://jira.hh.ru/browse/$branch['jira_task_id']">$branch['branch']</a></td>
        <td>
            <img src="$jira_priority_map[branch['jira_task_priority'] + '_icon']" alt="$branch['jira_task_priority']"
                 title="$branch['jira_task_priority']" width="16" align="absmiddle" border="0" height="16">
        </td>
        <td>$branch['jira_task_summary']</td>
    </tr>
</table>
<br/>


<a>Не мерджится с мастером: $len(fail_merge)</a>
<table>
    $for branch in fail_merge:
    <tr>
        <td><input type="checkbox"/></td>
        <td><a href="http://jira.hh.ru/browse/$branch['jira_task_id']">$branch['branch']</a></td>
        <td>
            <img src="$jira_priority_map[branch['jira_task_priority'] + '_icon']" alt="$branch['jira_task_priority']"
                 title="$branch['jira_task_priority']" width="16" align="absmiddle" border="0" height="16">
        </td>
        <td>$branch['jira_task_summary']</td>
    </tr>
</table>
<br/>


<a>Мерджится с мастером, еще не собиралось: $len(succ_merge_no_build) </a>
<table>
    $for branch in succ_merge_no_build:
    <tr>
        <td><a href="http://jira.hh.ru/browse/$branch['jira_task_id']">$branch['branch']</a></td>
        <td>
            <img src="$jira_priority_map[branch['jira_task_priority'] + '_icon']" alt="$branch['jira_task_priority']"
                 title="$branch['jira_task_priority']" width="16" align="absmiddle" border="0" height="16">
        </td>
        <td>$branch['jira_task_summary']</td>
    </tr>
</table>
<br/>

<a>Еще не мерджилось: $len(no_merge)</a>
<table>
    $for branch in no_merge:
    <tr>
        <td><a href="http://jira.hh.ru/browse/$branch['jira_task_id']">$branch['branch']</a></td>
        <td>
            <img src="$jira_priority_map[branch['jira_task_priority'] + '_icon']" alt="$branch['jira_task_priority']"
                 title="$branch['jira_task_priority']" width="16" align="absmiddle" border="0" height="16">
        </td>
        <td>$branch['jira_task_summary']</td>
    </tr>
</table>
<br/>


</body>
</html>
